"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2935],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>c});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var o=a.createContext({}),p=function(t){var e=a.useContext(o),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},u=function(t){var e=p(t.components);return a.createElement(o.Provider,{value:e},t.children)},d="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},k=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,o=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),d=p(n),k=r,c=d["".concat(o,".").concat(k)]||d[k]||m[k]||l;return n?a.createElement(c,s(s({ref:e},u),{},{components:n})):a.createElement(c,s({ref:e},u))}));function c(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,s=new Array(l);s[0]=k;var i={};for(var o in e)hasOwnProperty.call(e,o)&&(i[o]=e[o]);i.originalType=t,i[d]="string"==typeof t?t:r,s[1]=i;for(var p=2;p<l;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},3397:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var a=n(3117),r=(n(7294),n(3905));const l={},s="wstETH",i={unversionedId:"contracts/wsteth",id:"contracts/wsteth",title:"wstETH",description:"- Source Code",source:"@site/docs/contracts/wsteth.md",sourceDirName:"contracts",slug:"/contracts/wsteth",permalink:"/contracts/wsteth",draft:!1,editUrl:"https://github.com/lidofinance/docs/blob/main/docs/contracts/wsteth.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"WithdrawalVault",permalink:"/contracts/withdrawal-vault"},next:{title:"DepositSecurityModule",permalink:"/contracts/deposit-security-module"}},o={},p=[{value:"What is wrapped stETH (wstETH)?",id:"what-is-wrapped-steth-wsteth",level:2},{value:"Why use wstETH?",id:"why-use-wsteth",level:2},{value:"How to use wstETH?",id:"how-to-use-wsteth",level:2},{value:"Staking shortcut",id:"staking-shortcut",level:3},{value:"Standards",id:"standards",level:2},{value:"View Methods",id:"view-methods",level:2},{value:"getWstETHByStETH()",id:"getwstethbysteth",level:3},{value:"Parameters:",id:"parameters",level:4},{value:"getStETHByWstETH()",id:"getstethbywsteth",level:3},{value:"Parameters:",id:"parameters-1",level:4},{value:"stEthPerToken()",id:"stethpertoken",level:3},{value:"tokensPerStEth()",id:"tokenspersteth",level:3},{value:"Methods",id:"methods",level:2},{value:"wrap()",id:"wrap",level:3},{value:"Parameters:",id:"parameters-2",level:4},{value:"Returns:",id:"returns",level:4},{value:"unwrap()",id:"unwrap",level:3},{value:"Parameters:",id:"parameters-3",level:4},{value:"Returns:",id:"returns-1",level:4},{value:"receive()",id:"receive",level:3}],u={toc:p},d="wrapper";function m(t){let{components:e,...n}=t;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"wsteth"},"wstETH"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lidofinance/lido-dao/blob/master/contracts/0.6.12/WstETH.sol"},"Source Code")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://etherscan.io/token/0x7f39c581f595b53c5cb19bd0b3f8da6c935e2ca0"},"Deployed Contract"))),(0,r.kt)("h2",{id:"what-is-wrapped-steth-wsteth"},"What is wrapped stETH (wstETH)?"),(0,r.kt)("p",null,"It's an ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-20"},"ERC-20")," value-accruing token\nwrapper for ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH"),". Its balance does not change with each oracle report, but its\nvalue in ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," does. Internally, it represents the user's ",(0,r.kt)("a",{parentName:"p",href:"../guides/steth-integration-guide#steth-internals-share-mechanics"},"share")," of the total\nsupply of ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," tokens."),(0,r.kt)("h2",{id:"why-use-wsteth"},"Why use wstETH?"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")," is mainly used as a layer of compatibility to integrate ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," into other\nDeFi protocols, that do not support rebasable tokens, especially bridges to L2s and\nother chains, as rebases don't work for bridged assets by default."),(0,r.kt)("h2",{id:"how-to-use-wsteth"},"How to use wstETH?"),(0,r.kt)("p",null,"The contract can be used as a trustless wrapper that accepts stETH tokens and mints\nwstETH in return. When the user unwraps, the contract burns the user's ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH"),",\nand sends the user locked ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," in return."),(0,r.kt)("h3",{id:"staking-shortcut"},"Staking shortcut"),(0,r.kt)("p",null,"The user can send ETH with regular transfer to the address of the contract and\nget wstETH in return. The contract will send ETH to Lido submit method,\nstaking it and wrapping the received stETH seamlessly under the hood."),(0,r.kt)("h2",{id:"standards"},"Standards"),(0,r.kt)("p",null,"Contract implements the following Ethereum standards:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-20"},"ERC-20: Token Standard")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-2612"},"ERC-2612: Permit Extension for ERC-20 Signed Approvals")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-712"},"EIP-712: Typed structured data hashing and signing"))),(0,r.kt)("h2",{id:"view-methods"},"View Methods"),(0,r.kt)("h3",{id:"getwstethbysteth"},"getWstETHByStETH()"),(0,r.kt)("p",null,"Returns amount of ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")," for a given amount of ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getWstETHByStETH(uint256 _stETHAmount) returns (uint256)\n")),(0,r.kt)("h4",{id:"parameters"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_stETHAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"amount of stETH")))),(0,r.kt)("h3",{id:"getstethbywsteth"},"getStETHByWstETH()"),(0,r.kt)("p",null,"Returns amount of ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," for a given amount of ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getStETHByWstETH(uint256 _wstETHAmount) returns (uint256)\n")),(0,r.kt)("h4",{id:"parameters-1"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_wstETHAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"amount of wstETH")))),(0,r.kt)("h3",{id:"stethpertoken"},"stEthPerToken()"),(0,r.kt)("p",null,"Returns the amount of stETH tokens corresponding to one ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function stEthPerToken() returns (uint256)\n")),(0,r.kt)("h3",{id:"tokenspersteth"},"tokensPerStEth()"),(0,r.kt)("p",null,"Returns the number of ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")," tokens corresponding to one ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function tokensPerStEth() returns (uint256)\n")),(0,r.kt)("h2",{id:"methods"},"Methods"),(0,r.kt)("h3",{id:"wrap"},"wrap()"),(0,r.kt)("p",null,"Exchanges ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"wstETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function wrap(uint256 _stETHAmount) returns (uint256)\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Requirements:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_stETHAmount")," must be non-zero"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg.sender")," must approve at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_stETHAmount")," stETH to this contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg.sender")," must have at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_stETHAmount")," of stETH."))),(0,r.kt)("h4",{id:"parameters-2"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_stETHAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"amount of stETH to wrap in exchange for wstETH")))),(0,r.kt)("h4",{id:"returns"},"Returns:"),(0,r.kt)("p",null,"Amount of wstETH user receives after wrap"),(0,r.kt)("h3",{id:"unwrap"},"unwrap()"),(0,r.kt)("p",null,"Exchanges wstETH to ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function unwrap(uint256 _wstETHAmount) returns (uint256)\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Requirements:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_wstETHAmount")," must be non-zero"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg.sender")," must have at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_wstETHAmount")," wstETH."))),(0,r.kt)("h4",{id:"parameters-3"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_wstETHAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"amount of wstETH to unwrap in exchange for stETH")))),(0,r.kt)("h4",{id:"returns-1"},"Returns:"),(0,r.kt)("p",null,"Amount of stETH user receives after unwrapping"),(0,r.kt)("h3",{id:"receive"},"receive()"),(0,r.kt)("p",null,"Shortcut to stake ETH and auto-wrap returned ",(0,r.kt)("inlineCode",{parentName:"p"},"stETH")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"receive() payable\n")))}m.isMDXComponent=!0}}]);