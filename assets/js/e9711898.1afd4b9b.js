"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[736],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,i=function(e,t){if(null==e)return{};var r,o,i={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=o.createContext({}),d=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var r=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(r),f=i,h=u["".concat(l,".").concat(f)]||u[f]||p[f]||n;return r?o.createElement(h,a(a({ref:t},c),{},{components:r})):o.createElement(h,a({ref:t},c))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=r.length,a=new Array(n);a[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,a[1]=s;for(var d=2;d<n;d++)a[d]=r[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}f.displayName="MDXCreateElement"},7725:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>d});var o=r(3117),i=(r(7294),r(3905));const n={},a="Introduction",s={unversionedId:"guides/node-operators/exits/introduction",id:"guides/node-operators/exits/introduction",title:"Introduction",description:"Lido V2 protocol upgrade adds support for Ethereum Withdrawals and introduces additional responsibilities for Node Operators.",source:"@site/docs/guides/node-operators/exits/introduction.md",sourceDirName:"guides/node-operators/exits",slug:"/guides/node-operators/exits/introduction",permalink:"/guides/node-operators/exits/introduction",draft:!1,editUrl:"https://github.com/lidofinance/docs/blob/main/docs/guides/node-operators/exits/introduction.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Execution Layer Rewards Configuration",permalink:"/guides/node-operators/el-rewards-configuration"},next:{title:"General Information",permalink:"/guides/node-operators/exits/general-information"}},l={},d=[{value:"Requirements",id:"requirements",level:2},{value:"Lido Tooling",id:"lido-tooling",level:2},{value:"Keys API (KAPI for short)",id:"keys-api-kapi-for-short",level:3},{value:"Validator Ejector (Ejector for short)",id:"validator-ejector-ejector-for-short",level:3}],c={toc:d},u="wrapper";function p(e){let{components:t,...r}=e;return(0,i.kt)(u,(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://blog.lido.fi/introducing-lido-v2/"},"Lido V2")," protocol upgrade adds support for ",(0,i.kt)("a",{parentName:"p",href:"https://ethereum.org/en/staking/withdrawals/"},"Ethereum Withdrawals")," and introduces additional responsibilities for Node Operators."),(0,i.kt)("p",null,"Lido Withdrawals are happening in four stages:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"stETH holders request a withdrawal"),(0,i.kt)("li",{parentName:"ol"},"Lido Oracles decide which Lido validators should be exited to fulfil the request and publish the list on-chain"),(0,i.kt)("li",{parentName:"ol"},"Lido Node Operators exit these validators"),(0,i.kt)("li",{parentName:"ol"},"stETH holders claim their ETH")),(0,i.kt)("p",null,"This means that Node Operators need a way to react quickly to protocol requests."),(0,i.kt)("p",null,"The suggested method is to generate and sign exit messages ahead of time which will be sent out when needed by a special new daemon called the Validator Ejector."),(0,i.kt)("p",null,"To understand for which validators to generate and sign exit messages, another new app called Keys API is introduced."),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("p",null,"First, is running Lido tooling required?"),(0,i.kt)("p",null,"Lido tooling is not required to use, but is recommended."),(0,i.kt)("p",null,"The only requirement for Node Operators is to exit their validators in time after requested by the protocol."),(0,i.kt)("p",null,"For details, check out ",(0,i.kt)("a",{parentName:"p",href:"https://hackmd.io/@lido/HJYFjmf6s"},"Validator Exits Policy")," and ",(0,i.kt)("a",{parentName:"p",href:"https://research.lido.fi/t/lido-validator-exits-policy-draft-for-discussion"},"Research Forum Discussion"),"."),(0,i.kt)("h2",{id:"lido-tooling"},"Lido Tooling"),(0,i.kt)("h3",{id:"keys-api-kapi-for-short"},"Keys API (KAPI for short)"),(0,i.kt)("p",null,"KAPI is a service which stores and serves up-to-date information about Lido validators."),(0,i.kt)("p",null,"It provides a very important function: it provides two endpoints, using which a Node Operator understands for which validators to generate and sign exit messages in advance."),(0,i.kt)("p",null,"Under the hood, KAPI also automatically filters out validators which are exited already or are currently exiting."),(0,i.kt)("h3",{id:"validator-ejector-ejector-for-short"},"Validator Ejector (Ejector for short)"),(0,i.kt)("p",null,"Ejector is a daemon service which monitors ",(0,i.kt)("inlineCode",{parentName:"p"},"ValidatorsExitBusOracle")," events and initiates an exit when required."),(0,i.kt)("p",null,"In messages mode, on start, it loads exit messages in form of individual .json files from a specified folder or an external storage and validates their format, structure and signature."),(0,i.kt)("p",null,"It then loads events from a configurable amount of latest finalized blocks, checks if exits should be made and after that periodically fetches fresh events."),(0,i.kt)("p",null,"In webhook mode, it simply fetches a remote endpoint when an exit should be made, allowing to implement JIT approach by offloading exiting logic to an external service and using the Ejector as a secure exit events reader."))}p.isMDXComponent=!0}}]);