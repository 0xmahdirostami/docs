"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[119],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=d(a),c=r,k=m["".concat(s,".").concat(c)]||m[c]||u[c]||l;return a?n.createElement(k,i(i({ref:t},p),{},{components:a})):n.createElement(k,i({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},6471:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const l={},i="Lido",o={unversionedId:"contracts/lido",id:"contracts/lido",title:"Lido",description:"- Source code",source:"@site/docs/contracts/lido.md",sourceDirName:"contracts",slug:"/contracts/lido",permalink:"/contracts/lido",editUrl:"https://github.com/lidofinance/docs/blob/main/docs/contracts/lido.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"LidoLocator",permalink:"/contracts/lido-locator"},next:{title:"EIP712StETH",permalink:"/contracts/eip712-steth"}},s=[{value:"Rebasing",id:"rebasing",children:[],level:2},{value:"Beacon Stats Reporting",id:"beacon-stats-reporting",children:[],level:2},{value:"Execution layer rewards",id:"execution-layer-rewards",children:[],level:2},{value:"Staking rate limiting",id:"staking-rate-limiting",children:[],level:2},{value:"View Methods",id:"view-methods",children:[{value:"name()",id:"name",children:[],level:3},{value:"symbol()",id:"symbol",children:[],level:3},{value:"decimals()",id:"decimals",children:[],level:3},{value:"totalSupply()",id:"totalsupply",children:[],level:3},{value:"getTotalPooledEther()",id:"gettotalpooledether",children:[],level:3},{value:"balanceOf()",id:"balanceof",children:[],level:3},{value:"getTotalShares()",id:"gettotalshares",children:[],level:3},{value:"sharesOf()",id:"sharesof",children:[],level:3},{value:"getSharesByPooledEth()",id:"getsharesbypooledeth",children:[],level:3},{value:"getPooledEthByShares()",id:"getpooledethbyshares",children:[],level:3},{value:"getFee()",id:"getfee",children:[{value:"Returns:",id:"returns",children:[],level:4}],level:3},{value:"getFeeDistribution()",id:"getfeedistribution",children:[{value:"Returns:",id:"returns-1",children:[],level:4}],level:3},{value:"getWithdrawalCredentials()",id:"getwithdrawalcredentials",children:[],level:3},{value:"getBufferedEther()",id:"getbufferedether",children:[{value:"Returns:",id:"returns-2",children:[],level:4}],level:3},{value:"getDepositContract()",id:"getdepositcontract",children:[{value:"Returns:",id:"returns-3",children:[],level:4}],level:3},{value:"getOracle()",id:"getoracle",children:[],level:3},{value:"getOperators()",id:"getoperators",children:[{value:"Returns:",id:"returns-4",children:[],level:4}],level:3},{value:"getTreasury()",id:"gettreasury",children:[],level:3},{value:"getInsuranceFund()",id:"getinsurancefund",children:[],level:3},{value:"getBeaconStat()",id:"getbeaconstat",children:[{value:"Returns:",id:"returns-5",children:[],level:4}],level:3},{value:"isStakingPaused()",id:"isstakingpaused",children:[{value:"Returns:",id:"returns-6",children:[],level:4}],level:3},{value:"getCurrentStakeLimit()",id:"getcurrentstakelimit",children:[{value:"Returns:",id:"returns-7",children:[],level:4}],level:3},{value:"getStakeLimitFullInfo()",id:"getstakelimitfullinfo",children:[{value:"Returns:",id:"returns-8",children:[],level:4}],level:3},{value:"getTotalELRewardsCollected()",id:"gettotalelrewardscollected",children:[{value:"Returns:",id:"returns-9",children:[],level:4}],level:3},{value:"getELRewardsVault()",id:"getelrewardsvault",children:[{value:"Returns:",id:"returns-10",children:[],level:4}],level:3}],level:2},{value:"Methods",id:"methods",children:[{value:"transfer()",id:"transfer",children:[{value:"Parameters:",id:"parameters",children:[],level:4},{value:"Returns:",id:"returns-11",children:[],level:4}],level:3},{value:"transferShares()",id:"transfershares",children:[{value:"Parameters:",id:"parameters-1",children:[],level:4},{value:"Returns:",id:"returns-12",children:[],level:4}],level:3},{value:"allowance()",id:"allowance",children:[{value:"Parameters:",id:"parameters-2",children:[],level:4}],level:3},{value:"approve()",id:"approve",children:[{value:"Parameters:",id:"parameters-3",children:[],level:4},{value:"Returns:",id:"returns-13",children:[],level:4}],level:3},{value:"transferFrom()",id:"transferfrom",children:[{value:"Parameters:",id:"parameters-4",children:[],level:4},{value:"Returns:",id:"returns-14",children:[],level:4}],level:3},{value:"increaseAllowance()",id:"increaseallowance",children:[{value:"Parameters:",id:"parameters-5",children:[],level:4},{value:"Returns:",id:"returns-15",children:[],level:4}],level:3},{value:"decreaseAllowance()",id:"decreaseallowance",children:[{value:"Parameters:",id:"parameters-6",children:[],level:4},{value:"Returns:",id:"returns-16",children:[],level:4}],level:3},{value:"submit()",id:"submit",children:[{value:"Parameters:",id:"parameters-7",children:[],level:4},{value:"Returns:",id:"returns-17",children:[],level:4}],level:3},{value:"depositBufferedEther()",id:"depositbufferedether",children:[{value:"Parameters:",id:"parameters-8",children:[],level:4}],level:3},{value:"burnShares()",id:"burnshares",children:[{value:"Parameters",id:"parameters-9",children:[],level:4},{value:"Returns",id:"returns-18",children:[],level:4}],level:3},{value:"stop()",id:"stop",children:[],level:3},{value:"resume()",id:"resume",children:[],level:3},{value:"pauseStaking()",id:"pausestaking",children:[],level:3},{value:"resumeStaking()",id:"resumestaking",children:[],level:3},{value:"setStakingLimit()",id:"setstakinglimit",children:[{value:"Parameters:",id:"parameters-10",children:[],level:4}],level:3},{value:"removeStakingLimit()",id:"removestakinglimit",children:[],level:3},{value:"receiveELRewards()",id:"receiveelrewards",children:[],level:3},{value:"setELRewardsVault()",id:"setelrewardsvault",children:[{value:"Parameters:",id:"parameters-11",children:[],level:4}],level:3},{value:"setFee()",id:"setfee",children:[{value:"Parameters",id:"parameters-12",children:[],level:4}],level:3},{value:"setFeeDistribution()",id:"setfeedistribution",children:[{value:"Parameters",id:"parameters-13",children:[],level:4}],level:3},{value:"setProtocolContracts()",id:"setprotocolcontracts",children:[{value:"Parameters",id:"parameters-14",children:[],level:4}],level:3},{value:"setWithdrawalCredentials()",id:"setwithdrawalcredentials",children:[{value:"Parameters",id:"parameters-15",children:[],level:4}],level:3},{value:"handleOracleReport()",id:"handleoraclereport",children:[{value:"Parameters",id:"parameters-16",children:[],level:4}],level:3},{value:"transferToVault()",id:"transfertovault",children:[{value:"Parameters",id:"parameters-17",children:[],level:4}],level:3}],level:2}],d={toc:s};function p(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lido"},"Lido"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lidofinance/lido-dao/blob/master/contracts/0.4.24/Lido.sol"},"Source code")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://etherscan.io/address/0xae7ab96520de3a18e5e111b5eaab095312d7fe84"},"Deployed contract"))),(0,r.kt)("p",null,"Lido is the core contract which acts as a liquid staking pool. The contract is responsible for Ether deposits and withdrawals, minting and burning liquid tokens, delegating funds to node operators, applying fees, and accepting updates from the oracle contract. Node Operators' logic is extracted to a separate contract, NodeOperatorsRegistry."),(0,r.kt)("p",null,"Lido also acts as an ERC20 token which represents staked ether, stETH. Tokens are minted upon deposit and burned when redeemed. Despite stETH tokens being pegged 1:1 to the ether that is held by Lido, the market exchange rate between stETH and ETH may vary. stETH holder balances are updated daily with oracle reports."),(0,r.kt)("h2",{id:"rebasing"},"Rebasing"),(0,r.kt)("p",null,"When a rebase occurs, the supply of the token is increased or decreased algorithmically, based on staking rewards (or slashing penalties) on the Beacon chain, and execution layer rewards (starting from ",(0,r.kt)("a",{parentName:"p",href:"https://ethereum.org/en/upgrades/merge/"},"the Merge")," Ethereum upgrade). A rebase happens when oracles report beacon stats."),(0,r.kt)("p",null,'The rebasing mechanism is implemented via "shares". Instead of storing map with account balances, Lido stores which share owned by account in the total amount of Ether controlled by the protocol.'),(0,r.kt)("p",null,"The balance of an account is calculated as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"balanceOf(account) = shares[account] * totalPooledEther / totalShares\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"shares")," - map of user account shares. Every time user deposit ether, it converted to shares and added to current user shares.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"totalShares")," sum of shares of all account in ",(0,r.kt)("inlineCode",{parentName:"p"},"shares")," map")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"totalPooledEther")," is a sum of three types of ether owned by protocol:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"buffered balance - ether stored on contract and haven't deposited to official Deposit contract yet."),(0,r.kt)("li",{parentName:"ul"},"transient balance - ether submitted to the official Deposit contract but not yet visible in the beacon state."),(0,r.kt)("li",{parentName:"ul"},"beacon balance - total amount of ether on validator accounts. This value reported by oracles and makes strongest impact to stETH total supply change.")))),(0,r.kt)("p",null,"For example, assume that we have:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"totalShares = 500\ntotalPooledEther = 10 ETH\nsharesOf(Alice) -> 100\nsharesOf(Bob) -> 400\n")),(0,r.kt)("p",null,"Therefore:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"balanceOf(Alice) -> 2 tokens which corresponds 2 ETH\nbalanceOf(Bob) -> 8 tokens which corresponds 8 ETH\n")),(0,r.kt)("h2",{id:"beacon-stats-reporting"},"Beacon Stats Reporting"),(0,r.kt)("p",null,"One of the most important parts of protocol, it's precise and steady reported data about current balances of validators. Such reports happen once at defined period of time, called frame. Frame duration set by DAO, current value is 24 hours."),(0,r.kt)("p",null,"To update stats on main Lido contract oracle demands quorum to be reached.\nQuorum - is a necessary amount of reports with equal stats from offchain oracle daemons run by protocol participants.\nQuorum size and members controlled by DAO.\nIf quorum wasn't reached next report can happen only at the first epoch of next frame (after 24 hours)."),(0,r.kt)("p",null,"Report consists of count of validators participated in protocol - beacon validators and total amount of ether on validator accounts - beacon balance. Typically beacon balance growth from report to report, but in exceptional cases it also can drops, because of slashing."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When beacon balance grown between reports, protocol register profit and distribute reward of fresh minting stETH tokens between stETH holders, node operators, insurance fund and treasury. Fee distribution for node operators, insurance fund and treasury can be set by DAO."),(0,r.kt)("li",{parentName:"ul"},"When frame was ended with slashing and new beacon balance less than previous one total supply of stETH becomes less than in previous report and no rewards distributed.")),(0,r.kt)("h2",{id:"execution-layer-rewards"},"Execution layer rewards"),(0,r.kt)("p",null,"Lido implements an architecture design which was proposed in the Lido Improvement Proposal ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/lido-improvement-proposals/blob/develop/LIPS/lip-12.md"},"#12")," to collect the execution level rewards (starting from the Merge hardfork) and distribute them as part of the Lido Oracle report."),(0,r.kt)("p",null,"These execution layer rewards are initially accumulaed on the dedicated ",(0,r.kt)("a",{parentName:"p",href:"lido-execution-layer-rewards-vault"},(0,r.kt)("inlineCode",{parentName:"a"},"LidoExecutionLayerRewardsVault"))," contract and include priority fees and MEV."),(0,r.kt)("h2",{id:"staking-rate-limiting"},"Staking rate limiting"),(0,r.kt)("p",null,"Lido features a safeguard mechanism to prevent huge APR losses facing the ",(0,r.kt)("a",{parentName:"p",href:"https://blog.lido.fi/modelling-the-entry-queue-post-merge-an-analysis-of-impacts-on-lidos-socialized-model/"},"post-merge entry queue demand"),"."),(0,r.kt)("p",null,"New staking requests can be rate-limited with a moving soft cap for the stake amount per desired period."),(0,r.kt)("p",null,"For details, see the Lido Improvement Proposal ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/lido-improvement-proposals/blob/develop/LIPS/lip-14.md"},"#14"),"."),(0,r.kt)("h2",{id:"view-methods"},"View Methods"),(0,r.kt)("h3",{id:"name"},"name()"),(0,r.kt)("p",null,"Returns the name of the token"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function name() returns (string)\n")),(0,r.kt)("h3",{id:"symbol"},"symbol()"),(0,r.kt)("p",null,"Returns the symbol of the token, usually a shorter version of the name"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function symbol() returns (string)\n")),(0,r.kt)("h3",{id:"decimals"},"decimals()"),(0,r.kt)("p",null,"Returns the number of decimals for getting user representation of a token amount."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function decimals() returns (uint8)\n")),(0,r.kt)("h3",{id:"totalsupply"},"totalSupply()"),(0,r.kt)("p",null,"Returns the amount of tokens in existence."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function totalSupply() returns (uint256)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Always equals to ",(0,r.kt)("inlineCode",{parentName:"p"},"getTotalPooledEther()")," since token amount\nis pegged to the total amount of Ether controlled by the protocol."))),(0,r.kt)("h3",{id:"gettotalpooledether"},"getTotalPooledEther()"),(0,r.kt)("p",null,"Returns the entire amount of Ether controlled by the protocol"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getTotalPooledEther() returns (uint256)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The sum of all ETH balances in the protocol, equals to the total supply of stETH."))),(0,r.kt)("h3",{id:"balanceof"},"balanceOf()"),(0,r.kt)("p",null,"Returns the amount of tokens owned by the ",(0,r.kt)("inlineCode",{parentName:"p"},"_account")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function balanceOf(address _account) returns (uint256)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Balances are dynamic and equal the ",(0,r.kt)("inlineCode",{parentName:"p"},"_account"),"'s share in the amount of the\ntotal Ether controlled by the protocol. See ",(0,r.kt)("inlineCode",{parentName:"p"},"sharesOf"),"."))),(0,r.kt)("h3",{id:"gettotalshares"},"getTotalShares()"),(0,r.kt)("p",null,"Returns the total amount of shares in existence."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getTotalShares() returns (uint256)\n")),(0,r.kt)("h3",{id:"sharesof"},"sharesOf()"),(0,r.kt)("p",null,"Returns the amount of shares owned by ",(0,r.kt)("inlineCode",{parentName:"p"},"_account")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function sharesOf(address _account) returns (uint256)\n")),(0,r.kt)("h3",{id:"getsharesbypooledeth"},"getSharesByPooledEth()"),(0,r.kt)("p",null,"Returns the amount of shares that corresponds to ",(0,r.kt)("inlineCode",{parentName:"p"},"_ethAmount")," protocol-controlled Ether"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getSharesByPooledEth(uint256 _ethAmount) returns (uint256)\n")),(0,r.kt)("h3",{id:"getpooledethbyshares"},"getPooledEthByShares()"),(0,r.kt)("p",null,"Returns the amount of Ether that corresponds to ",(0,r.kt)("inlineCode",{parentName:"p"},"_sharesAmount")," token shares"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getPooledEthByShares(uint256 _sharesAmount) returns (uint256)\n")),(0,r.kt)("h3",{id:"getfee"},"getFee()"),(0,r.kt)("p",null,"Returns staking rewards fee rate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getFee() returns (uint16)\n")),(0,r.kt)("h4",{id:"returns"},"Returns:"),(0,r.kt)("p",null,"Fee in basis points. 10000 BP corresponding to 100%."),(0,r.kt)("h3",{id:"getfeedistribution"},"getFeeDistribution()"),(0,r.kt)("p",null,"Returns fee distribution proportion"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getFeeDistribution() returns (\n  uint16 treasuryFeeBasisPoints,\n  uint16 insuranceFeeBasisPoints,\n  uint16 operatorsFeeBasisPoints\n)\n")),(0,r.kt)("h4",{id:"returns-1"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"treasuryFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the treasury. Expressed in basis points, 10000 BP corresponding to 100%.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"insuranceFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the insurance fund. Expressed in basis points, 10000 BP corresponding to 100%.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"operatorsFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the node operators. Expressed in basis points, 10000 BP corresponding to 100%.")))),(0,r.kt)("h3",{id:"getwithdrawalcredentials"},"getWithdrawalCredentials()"),(0,r.kt)("p",null,"Returns current credentials to withdraw ETH on the Execution Layer side"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getWithdrawalCredentials() returns (bytes32)\n")),(0,r.kt)("h3",{id:"getbufferedether"},"getBufferedEther()"),(0,r.kt)("p",null,"Get the amount of Ether temporary buffered on this contract balance"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Buffered balance is kept on the contract from the moment the funds are received from user\nuntil the moment they are actually sent to the official Deposit contract."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getBufferedEther()  returns (uint256)\n")),(0,r.kt)("h4",{id:"returns-2"},"Returns:"),(0,r.kt)("p",null,"Amount of buffered funds in wei"),(0,r.kt)("h3",{id:"getdepositcontract"},"getDepositContract()"),(0,r.kt)("p",null,"Gets deposit contract handle"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getDepositContract() public view returns (IDepositContract)\n")),(0,r.kt)("h4",{id:"returns-3"},"Returns:"),(0,r.kt)("p",null,"Address of deposit contract"),(0,r.kt)("h3",{id:"getoracle"},"getOracle()"),(0,r.kt)("p",null,"Returns authorized oracle address"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getOracle() returns (address)\n")),(0,r.kt)("h3",{id:"getoperators"},"getOperators()"),(0,r.kt)("p",null,"Gets node operators registry interface handle"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getOperators() returns (INodeOperatorsRegistry)\n")),(0,r.kt)("h4",{id:"returns-4"},"Returns:"),(0,r.kt)("p",null,"Address of NodeOperatorsRegistry contract"),(0,r.kt)("h3",{id:"gettreasury"},"getTreasury()"),(0,r.kt)("p",null,"Returns the treasury address"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getTreasury() returns (address)\n")),(0,r.kt)("h3",{id:"getinsurancefund"},"getInsuranceFund()"),(0,r.kt)("p",null,"Returns the insurance fund address"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getInsuranceFund() returns (address)\n")),(0,r.kt)("h3",{id:"getbeaconstat"},"getBeaconStat()"),(0,r.kt)("p",null,"Returns the key values related to Beacon-side"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getBeaconStat() returns (\n  uint256 depositedValidators,\n  uint256 beaconValidators,\n  uint256 beaconBalance\n)\n")),(0,r.kt)("h4",{id:"returns-5"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"depositedValidators")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of deposited validators")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"beaconValidators")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of Lido's validators visible in the Beacon state, reported by oracles")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"beaconBalance")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Total amount of Beacon-side Ether (sum of all the balances of Lido validators)")))),(0,r.kt)("h3",{id:"isstakingpaused"},"isStakingPaused()"),(0,r.kt)("p",null,"Returns staking state: whether it's paused or not"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function isStakingPaused() external view returns (bool)\n")),(0,r.kt)("h4",{id:"returns-6"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"isStakingPaused")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bool")),(0,r.kt)("td",{parentName:"tr",align:null},"Staking pause state")))),(0,r.kt)("h3",{id:"getcurrentstakelimit"},"getCurrentStakeLimit()"),(0,r.kt)("p",null,"Returns how much Ether can be staked in the current block"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getCurrentStakeLimit() public view returns (uint256)\n")),(0,r.kt)("h4",{id:"returns-7"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"stakeLimit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Currently availble limit for stake request in the current block")))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Special return values:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"2^256 - 1")," if staking is unlimited;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"0")," if staking is paused or if limit is exhausted.")))),(0,r.kt)("h3",{id:"getstakelimitfullinfo"},"getStakeLimitFullInfo()"),(0,r.kt)("p",null,"Returns full info about current stake limit params and state"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getStakeLimitFullInfo() external view returns (\n    bool isStakingPaused,\n    bool isStakingLimitSet,\n    uint256 currentStakeLimit,\n    uint256 maxStakeLimit,\n    uint256 maxStakeLimitGrowthBlocks,\n    uint256 prevStakeLimit,\n    uint256 prevStakeBlockNumber\n)\n")),(0,r.kt)("h4",{id:"returns-8"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"isStakingPaused")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bool")),(0,r.kt)("td",{parentName:"tr",align:null},"Staking pause state (equivalent to return of ",(0,r.kt)("inlineCode",{parentName:"td"},"isStakingPaused()"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"isStakingLimitSet")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bool")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether the stake limit is set or not")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"currentStakeLimit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Current stake limit (equivalent to return of ",(0,r.kt)("inlineCode",{parentName:"td"},"getCurrentStakeLimit()"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"maxStakeLimit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Max stake limit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"maxStakeLimitGrowthBlocks")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Blocks needed to restore max stake limit from the fully exhausted state")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"prevStakeLimit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Previously reached stake limit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"prevStakeBlockNumber")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Previously seen block number")))),(0,r.kt)("h3",{id:"gettotalelrewardscollected"},"getTotalELRewardsCollected()"),(0,r.kt)("p",null,"Get total amount of execution layer rewards collected to Lido contract"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Ether got through ",(0,r.kt)("a",{parentName:"p",href:"lido-execution-layer-rewards-vault"},(0,r.kt)("inlineCode",{parentName:"a"},"LidoExecutionLayerRewardsVault"))," is kept on this contract's balance the same way\nas other buffered Ether is kept (until it gets deposited)."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getTotalELRewardsCollected() external view returns (uint256)\n")),(0,r.kt)("h4",{id:"returns-9"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"totalELRewardsCollected")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of funds received as execution layer rewards (in wei)")))),(0,r.kt)("h3",{id:"getelrewardsvault"},"getELRewardsVault()"),(0,r.kt)("p",null,"Returns address of the contract set as ",(0,r.kt)("a",{parentName:"p",href:"lido-execution-layer-rewards-vault"},(0,r.kt)("inlineCode",{parentName:"a"},"LidoExecutionLayerRewardsVault")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function getELRewardsVault() public view returns (address)\n")),(0,r.kt)("h4",{id:"returns-10"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"elRewardsVault")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Vault's address")))),(0,r.kt)("h2",{id:"methods"},"Methods"),(0,r.kt)("h3",{id:"transfer"},"transfer()"),(0,r.kt)("p",null,"Moves ",(0,r.kt)("inlineCode",{parentName:"p"},"_amount")," tokens from the caller's account to the ",(0,r.kt)("inlineCode",{parentName:"p"},"_recipient")," account."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function transfer(address _recipient, uint256 _amount) returns (bool)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_recipient")," cannot be the zero address."),(0,r.kt)("li",{parentName:"ul"},"the caller must have a balance of at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_amount"),"."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_recipient")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of tokens recipient")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of tokens to transfer")))),(0,r.kt)("h4",{id:"returns-11"},"Returns:"),(0,r.kt)("p",null,"A boolean value indicating whether the operation succeeded."),(0,r.kt)("h3",{id:"transfershares"},"transferShares()"),(0,r.kt)("p",null,"Moves  token shares from the caller's account to the provided recipient account."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function transferShares(address _recipient, uint256 _sharesAmount) public returns (uint256)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_recipient")," cannot be the zero address."),(0,r.kt)("li",{parentName:"ul"},"the caller must have at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_sharesAmount")," shares."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-1"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_recipient")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of shares recipient")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_sharesAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of shares to transfer")))),(0,r.kt)("h4",{id:"returns-12"},"Returns:"),(0,r.kt)("p",null,"Amount of transferred tokens."),(0,r.kt)("h3",{id:"allowance"},"allowance()"),(0,r.kt)("p",null,"Returns the remaining number of tokens that ",(0,r.kt)("inlineCode",{parentName:"p"},"_spender")," is allowed to spend\non behalf of ",(0,r.kt)("inlineCode",{parentName:"p"},"_owner")," through ",(0,r.kt)("inlineCode",{parentName:"p"},"transferFrom"),". This is zero by default."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function allowance(address _owner, address _spender) returns (uint256)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This value changes when ",(0,r.kt)("inlineCode",{parentName:"p"},"approve")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"transferFrom")," is called."))),(0,r.kt)("h4",{id:"parameters-2"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_owner")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of owner")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_spender")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of spender")))),(0,r.kt)("h3",{id:"approve"},"approve()"),(0,r.kt)("p",null,"Sets ",(0,r.kt)("inlineCode",{parentName:"p"},"_amount")," as the allowance of ",(0,r.kt)("inlineCode",{parentName:"p"},"_spender")," over the caller's tokens"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function approve(address _spender, uint256 _amount) returns (bool)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_spender")," cannot be the zero address."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-3"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_spender")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of spender")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of tokens")))),(0,r.kt)("h4",{id:"returns-13"},"Returns:"),(0,r.kt)("p",null,"A boolean value indicating whether the operation succeeded"),(0,r.kt)("h3",{id:"transferfrom"},"transferFrom()"),(0,r.kt)("p",null,"Moves ",(0,r.kt)("inlineCode",{parentName:"p"},"_amount")," tokens from ",(0,r.kt)("inlineCode",{parentName:"p"},"_sender")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"_recipient")," using the\nallowance mechanism. ",(0,r.kt)("inlineCode",{parentName:"p"},"_amount")," is then deducted from the caller's\nallowance."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function transferFrom(\n  address _sender,\n  address _recipient,\n  uint256 _amount\n) returns (bool)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_sender")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"_recipient")," cannot be the zero addresses."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_sender")," must have a balance of at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_amount"),"."),(0,r.kt)("li",{parentName:"ul"},"the caller must have allowance for ",(0,r.kt)("inlineCode",{parentName:"li"},"_sender"),"'s tokens of at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_amount"),"."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-4"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_sender")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of spender")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_recipient")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of recipient")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of tokens")))),(0,r.kt)("h4",{id:"returns-14"},"Returns:"),(0,r.kt)("p",null,"A boolean value indicating whether the operation succeeded"),(0,r.kt)("h3",{id:"increaseallowance"},"increaseAllowance()"),(0,r.kt)("p",null,"Atomically increases the allowance granted to ",(0,r.kt)("inlineCode",{parentName:"p"},"_spender")," by the caller by ",(0,r.kt)("inlineCode",{parentName:"p"},"_addedValue")),(0,r.kt)("p",null,"This is an alternative to ",(0,r.kt)("inlineCode",{parentName:"p"},"approve")," that can be used as a mitigation for problems described ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/IERC20.sol#L42"},"here")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function increaseAllowance(address _spender, uint256 _addedValue) returns (bool)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_spender")," cannot be the the zero address."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-5"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_sender")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of spender")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_addedValue")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of tokens to increase allowance")))),(0,r.kt)("h4",{id:"returns-15"},"Returns:"),(0,r.kt)("p",null,"Returns a boolean value indicating whether the operation succeeded"),(0,r.kt)("h3",{id:"decreaseallowance"},"decreaseAllowance()"),(0,r.kt)("p",null,"Atomically decreases the allowance granted to ",(0,r.kt)("inlineCode",{parentName:"p"},"_spender")," by the caller by ",(0,r.kt)("inlineCode",{parentName:"p"},"_subtractedValue")),(0,r.kt)("p",null,"This is an alternative to ",(0,r.kt)("inlineCode",{parentName:"p"},"approve")," that can be used as a mitigation for\nproblems described ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/IERC20.sol#L42"},"here")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function decreaseAllowance(address _spender, uint256 _subtractedValue) returns (bool)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_spender")," cannot be the zero address."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_spender")," must have allowance for the caller of at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_subtractedValue"),"."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-6"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_sender")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of spender")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_subtractedValue")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of tokens to decrease allowance")))),(0,r.kt)("h4",{id:"returns-16"},"Returns:"),(0,r.kt)("p",null,"Returns a boolean value indicating whether the operation succeeded"),(0,r.kt)("h3",{id:"submit"},"submit()"),(0,r.kt)("p",null,"Send funds to the pool with optional ","_","referral parameter"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function submit(address _referral) payable returns (uint256)\n")),(0,r.kt)("h4",{id:"parameters-7"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_referral")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional referral address")))),(0,r.kt)("h4",{id:"returns-17"},"Returns:"),(0,r.kt)("p",null,"Amount of StETH shares generated"),(0,r.kt)("h3",{id:"depositbufferedether"},"depositBufferedEther()"),(0,r.kt)("p",null,"Deposits buffered ethers to the official DepositContract. If ",(0,r.kt)("inlineCode",{parentName:"p"},"_maxDeposits")," provided makes no more than ",(0,r.kt)("inlineCode",{parentName:"p"},"_maxDeposits")," deposit calls"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function depositBufferedEther()\nfunction depositBufferedEther(uint256 _maxDeposits)\n")),(0,r.kt)("h4",{id:"parameters-8"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_maxDeposits")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of max deposit calls")))),(0,r.kt)("h3",{id:"burnshares"},"burnShares()"),(0,r.kt)("p",null,"Destroys ",(0,r.kt)("inlineCode",{parentName:"p"},"_sharesAmount")," shares from ",(0,r.kt)("inlineCode",{parentName:"p"},"_account"),"'s holdings, decreasing the total amount of shares."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function burnShares(\n  address _account,\n  uint256 _sharesAmount\n) returns (uint256 newTotalShares)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This doesn't decrease the token total supply."),(0,r.kt)("p",{parentName:"div"},"Requirements:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_account")," cannot be the zero address."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_account")," must hold at least ",(0,r.kt)("inlineCode",{parentName:"li"},"_sharesAmount")," shares."),(0,r.kt)("li",{parentName:"ul"},"the contract must not be paused.")))),(0,r.kt)("h4",{id:"parameters-9"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_account")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address where shares will be burned")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_sharesAmount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of shares to burn")))),(0,r.kt)("h4",{id:"returns-18"},"Returns"),(0,r.kt)("p",null,"Amount of totalShares after tokens burning"),(0,r.kt)("h3",{id:"stop"},"stop()"),(0,r.kt)("p",null,"Stop pool routine operations"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function stop()\n")),(0,r.kt)("h3",{id:"resume"},"resume()"),(0,r.kt)("p",null,"Resume pool routine operations"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function resume()\n")),(0,r.kt)("h3",{id:"pausestaking"},"pauseStaking()"),(0,r.kt)("p",null,"Stops accepting new Ether to the protocol"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"While accepting new Ether is stopped, calls to the ",(0,r.kt)("inlineCode",{parentName:"p"},"submit")," function,\nas well as to the default payable function, will revert."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function pauseStaking() external\n")),(0,r.kt)("h3",{id:"resumestaking"},"resumeStaking()"),(0,r.kt)("p",null,"Resumes accepting new Ether to the protocol (if ",(0,r.kt)("inlineCode",{parentName:"p"},"pauseStaking")," was called previously)"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Staking could be rate-limited by imposing a limit on the stake amount at each moment in time,\nsee ",(0,r.kt)("inlineCode",{parentName:"p"},"setStakingLimit()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"removeStakingLimit()")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function resumeStaking() external\n")),(0,r.kt)("h3",{id:"setstakinglimit"},"setStakingLimit()"),(0,r.kt)("p",null,"Sets the staking rate limit"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Reverts if:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_maxStakeLimit")," == 0"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_maxStakeLimit")," >= 2^96"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_maxStakeLimit")," < ",(0,r.kt)("inlineCode",{parentName:"li"},"_stakeLimitIncreasePerBlock")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_maxStakeLimit")," / ",(0,r.kt)("inlineCode",{parentName:"li"},"_stakeLimitIncreasePerBlock")," >= 2^32 (only if ",(0,r.kt)("inlineCode",{parentName:"li"},"_stakeLimitIncreasePerBlock")," != 0)")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setStakingLimit(uint256 _maxStakeLimit, uint256 _stakeLimitIncreasePerBlock) external\n")),(0,r.kt)("h4",{id:"parameters-10"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_maxStakeLimit")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Max stake limit value")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_stakeLimitIncreasePerBlock")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Stake limit increase per single block")))),(0,r.kt)("p",null,"Limit explanation scheme:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    * \u25b2 Stake limit\n    * \u2502.....  .....   ........ ...            ....     ... Stake limit = max\n    * \u2502      .       .        .   .   .      .    . . .\n    * \u2502     .       .              . .  . . .      . .\n    * \u2502            .                .  . . .\n    * \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500> Time\n    * \u2502     ^      ^          ^   ^^^  ^ ^ ^     ^^^ ^     Stake events\n")),(0,r.kt)("h3",{id:"removestakinglimit"},"removeStakingLimit()"),(0,r.kt)("p",null,"Removes the staking rate limit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function removeStakingLimit() external\n")),(0,r.kt)("h3",{id:"receiveelrewards"},"receiveELRewards()"),(0,r.kt)("p",null,"A payable function for execution layer rewards,\ncan be called only by the ",(0,r.kt)("a",{parentName:"p",href:"lido-execution-layer-rewards-vault"},(0,r.kt)("inlineCode",{parentName:"a"},"LidoExecutionLayerRewardsVault"))," contract"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function receiveELRewards() external payable\n")),(0,r.kt)("h3",{id:"setelrewardsvault"},"setELRewardsVault()"),(0,r.kt)("p",null,"Sets the address of ",(0,r.kt)("a",{parentName:"p",href:"lido-execution-layer-rewards-vault"},(0,r.kt)("inlineCode",{parentName:"a"},"LidoExecutionLayerRewardsVault"))," contract"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setELRewardsVault(address _executionLayerRewardsVault) external\n")),(0,r.kt)("h4",{id:"parameters-11"},"Parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_executionLayerRewardsVault")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Execution layer rewards vault contract address")))),(0,r.kt)("h3",{id:"setfee"},"setFee()"),(0,r.kt)("p",null,"Set fee rate to ",(0,r.kt)("inlineCode",{parentName:"p"},"_feeBasisPoints")," basis points. The fees are accrued when oracles report staking results"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setFee(uint16 _feeBasisPoints)\n")),(0,r.kt)("h4",{id:"parameters-12"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_feeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee expressed in basis points, 10000 BP corresponding to 100%.")))),(0,r.kt)("h3",{id:"setfeedistribution"},"setFeeDistribution()"),(0,r.kt)("p",null,"Set fee distribution: ",(0,r.kt)("inlineCode",{parentName:"p"},"_treasuryFeeBasisPoints")," basis points go to the treasury,\n",(0,r.kt)("inlineCode",{parentName:"p"},"_insuranceFeeBasisPoints")," basis points go to the insurance fund,\n",(0,r.kt)("inlineCode",{parentName:"p"},"_operatorsFeeBasisPoints")," basis points go to node operators.\nThe sum has to be 10 000."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setFeeDistribution(\n  uint16 _treasuryFeeBasisPoints,\n  uint16 _insuranceFeeBasisPoints,\n  uint16 _operatorsFeeBasisPoints\n)\n")),(0,r.kt)("h4",{id:"parameters-13"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_treasuryFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the treasury. Expressed in basis points, 10000 BP corresponding to 100%.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_insuranceFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the insurance fund. Expressed in basis points, 10000 BP corresponding to 100%.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_operatorsFeeBasisPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint16")),(0,r.kt)("td",{parentName:"tr",align:null},"Fee for the node operators. Expressed in basis points, 10000 BP corresponding to 100%.")))),(0,r.kt)("h3",{id:"setprotocolcontracts"},"setProtocolContracts()"),(0,r.kt)("p",null,"Set Lido protocol contracts (oracle, treasury, insurance fund)."),(0,r.kt)("p",null,"Oracle contract specified here is allowed to make periodical updates of beacon stats by calling ",(0,r.kt)("inlineCode",{parentName:"p"},"handleOracleReport"),".\nTreasury contract specified here is used to accumulate the protocol treasury fee.\nInsurance fund contract specified here is used to accumulate the protocol insurance fee."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setProtocolContracts(address _oracle, address _treasury, address _insuranceFund) external\n")),(0,r.kt)("h4",{id:"parameters-14"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_oracle")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of oracle contract")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_treasury")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of trasury contract")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_insuranceFund")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Address of insurance fund contract")))),(0,r.kt)("h3",{id:"setwithdrawalcredentials"},"setWithdrawalCredentials()"),(0,r.kt)("p",null,"Set credentials to withdraw ETH on the Execution Layer side to ",(0,r.kt)("inlineCode",{parentName:"p"},"_withdrawalCredentials")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function setWithdrawalCredentials(bytes32 _withdrawalCredentials)\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Note that ",(0,r.kt)("inlineCode",{parentName:"p"},"setWithdrawalCredentials")," discards all unused signing keys as the signatures are invalidated."))),(0,r.kt)("h4",{id:"parameters-15"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_withdrawalCredentials")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bytes32")),(0,r.kt)("td",{parentName:"tr",align:null},"Hash of withdrawal multisignature key as accepted by the deposit_contract.deposit functione")))),(0,r.kt)("h3",{id:"handleoraclereport"},"handleOracleReport()"),(0,r.kt)("p",null,"Updates the number of Lido-controlled keys in the beacon validators set and their total balance.\nThe method is called by the Lido oracle to handle its quorum-reached report."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function handleOracleReport(uint256 _beaconValidators, uint256 _beaconBalance)\n")),(0,r.kt)("h4",{id:"parameters-16"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_beaconValidators")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of Lido's keys in the beacon state")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_beaconBalance")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"Summarized balance of Lido-controlled keys in wei")))),(0,r.kt)("h3",{id:"transfertovault"},"transferToVault()"),(0,r.kt)("p",null,"Send funds to recovery Vault. Overrides default AragonApp behaviour."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function transferToVault(address _token)\n")),(0,r.kt)("h4",{id:"parameters-17"},"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"_token")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"address")),(0,r.kt)("td",{parentName:"tr",align:null},"Token to be sent to recovery vault")))))}p.isMDXComponent=!0}}]);