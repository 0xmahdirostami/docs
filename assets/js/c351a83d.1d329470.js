"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[521],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>h});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(o),m=a,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return o?n.createElement(h,i(i({ref:t},d),{},{components:o})):n.createElement(h,i({ref:t},d))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<r;p++)i[p]=o[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},7935:(e,t,o)=>{o.r(t),o.d(t,{contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=o(7462),a=(o(7294),o(3905));const r={},i="Tooling Setup & Configuration",l={unversionedId:"guides/node-operators/exits/tooling-setup",id:"guides/node-operators/exits/tooling-setup",title:"Tooling Setup & Configuration",description:"Keys API (KAPI)",source:"@site/docs/guides/node-operators/exits/tooling-setup.md",sourceDirName:"guides/node-operators/exits",slug:"/guides/node-operators/exits/tooling-setup",permalink:"/guides/node-operators/exits/tooling-setup",editUrl:"https://github.com/lidofinance/docs/blob/main/docs/guides/node-operators/exits/tooling-setup.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Flow Examples",permalink:"/guides/node-operators/exits/flow-examples"},next:{title:"Oracle Operator Manual",permalink:"/guides/oracle-operator-manual"}},s=[{value:"Keys API (KAPI)",id:"keys-api-kapi",children:[],level:2},{value:"Validator Ejector (Ejector)",id:"validator-ejector-ejector",children:[],level:2},{value:"Required Infra for New Tooling",id:"required-infra-for-new-tooling",children:[],level:2},{value:"Common Configuration Options",id:"common-configuration-options",children:[{value:"Operator ID",id:"operator-id",children:[],level:3},{value:"Staking Router Module ID:",id:"staking-router-module-id",children:[],level:3}],level:2},{value:"Example Infra Setup",id:"example-infra-setup",children:[],level:2}],p={toc:s};function d(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"tooling-setup--configuration"},"Tooling Setup & Configuration"),(0,a.kt)("h2",{id:"keys-api-kapi"},"Keys API (KAPI)"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://hackmd.io/@lido/S1Li-wXl3"},"Dedicated Setup Guide")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/lido-keys-api"},"GitHub Repo")),(0,a.kt)("h2",{id:"validator-ejector-ejector"},"Validator Ejector (Ejector)"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://hackmd.io/@lido/BJvy7eWln"},"Dedicated Setup Guide")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/validator-ejector"},"GitHub Repo")),(0,a.kt)("h2",{id:"required-infra-for-new-tooling"},"Required Infra for New Tooling"),(0,a.kt)("p",null,"In order for the new tooling to read Lido contracts and validator information, tooling needs access to an Execution Node (full node to be exact) and a Consensus Node."),(0,a.kt)("p",null,"A dedicated CL+EL setup is recommended."),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Although the Ejector has ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/validator-ejector#safety-features"},"security protections"),", using hosted RPC providers (Infura, Alchemy, etc) is discouraged."))),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"It's also advised to have secure Ejector->Nodes and KAPI->Nodes communication, for example via a private network."))),(0,a.kt)("h2",{id:"common-configuration-options"},"Common Configuration Options"),(0,a.kt)("h3",{id:"operator-id"},"Operator ID"),(0,a.kt)("p",null,"You can find it on the Operators Dashboard (",(0,a.kt)("inlineCode",{parentName:"p"},"#123")," on the operator card): ",(0,a.kt)("a",{parentName:"p",href:"https://operators.testnet.fi"},"Goerli"),", ",(0,a.kt)("a",{parentName:"p",href:"https://operators.lido.fi"},"Mainnet")),(0,a.kt)("h3",{id:"staking-router-module-id"},"Staking Router Module ID:"),(0,a.kt)("p",null,"ID of the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/lido-dao/blob/feature/shapella-upgrade/contracts/0.8.9/StakingRouter.sol"},"StakingRouter")," contract module."),(0,a.kt)("p",null,"Currently, it has only one module (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/lido-dao/blob/feature/shapella-upgrade/contracts/0.4.24/nos/NodeOperatorsRegistry.sol"},"NodeOperatorsRegistry"),"), it's id is ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),"."),(0,a.kt)("h2",{id:"example-infra-setup"},"Example Infra Setup"),(0,a.kt)("p",null,"Lido DevOps team prepared an easy way to get the recommended tooling and its dependencies up and running using ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ansible/ansible"},"Ansible"),". This is a great way to get familiar with the new tooling. This is an example implementation, and still requires security and hardening by the NO; it can be found on ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/lidofinance/node-operators-setup"},"GitHub"),"."),(0,a.kt)("p",null,"It sets up 3 hosts:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Execution Layer + Consensus Layer nodes (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/ethereum/go-ethereum"},"Geth")," + ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/sigp/lighthouse"},"Lighthouse"),")"),(0,a.kt)("li",{parentName:"ul"},"KAPI & Ejector"),(0,a.kt)("li",{parentName:"ul"},"Monitoring")),(0,a.kt)("p",null,"Monitoring consists of:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/prometheus/prometheus"},"Prometheus")," for metrics"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/prometheus/alertmanager"},"Alertmanager")," for alerts"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/grafana/loki"},"Loki")," for logs"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/grafana/grafana"},"Grafana")," for dashboards")))}d.isMDXComponent=!0}}]);