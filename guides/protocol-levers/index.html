<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Lido Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Lido Docs Blog Atom Feed"><title data-react-helmet="true">Protocol levers | Lido Docs</title><meta data-react-helmet="true" property="og:url" content="https://lidofinance.github.io/guides/protocol-levers"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Protocol levers | Lido Docs"><meta data-react-helmet="true" name="description" content="The protocol provides a number of settings controllable by the DAO. Modifying each of them requires"><meta data-react-helmet="true" property="og:description" content="The protocol provides a number of settings controllable by the DAO. Modifying each of them requires"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon-32x32.png"><link data-react-helmet="true" rel="canonical" href="https://lidofinance.github.io/guides/protocol-levers"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/guides/protocol-levers" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lidofinance.github.io/guides/protocol-levers" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.964611c4.css">
<link rel="preload" href="/assets/js/styles.60d6036a.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.7a957d22.js" as="script">
<link rel="preload" href="/assets/js/main.09e3a1f9.js" as="script">
<link rel="preload" href="/assets/js/1.8e4f3c2a.js" as="script">
<link rel="preload" href="/assets/js/2.4f5c6331.js" as="script">
<link rel="preload" href="/assets/js/1a4e3797.2211e88d.js" as="script">
<link rel="preload" href="/assets/js/1be78505.fc09edae.js" as="script">
<link rel="preload" href="/assets/js/32.eae25c33.js" as="script">
<link rel="preload" href="/assets/js/31.6f8be8ee.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.744bd095.js" as="script">
<link rel="preload" href="/assets/js/17896441.d36306eb.js" as="script">
<link rel="preload" href="/assets/js/204f6ded.115badb4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido Docs</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lidofinance" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/lidofinance" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/lido-dao">Lido DAO</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/node-operator-manual">Node Operator Manual</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/oracle-operator-manual">Oracle Operator Manual</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/deposit-security-manual">Deposit Security Committee manual</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/multisig-deployment">Multisig deployment</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/guides/protocol-levers">Protocol levers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/etherscan-voting">DAO voting with Etherscan</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/integrations/sdk">SDKs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/integrations/subgraph">Subgraph</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Token guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/token-guides/steth-superuser-functions">StETH superuser functions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/lido">Lido</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/lido-oracle">LidoOracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/stable-swap-state-oracle">StableSwapStateOracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/steth-price-feed">StEthPriceFeed</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/node-operators-registry">NodeOperatorsRegistry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/withdrawals-manager-stub">WithdrawalsManagerStub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/wsteth">wstETH</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contracts/deposit-security-module">DepositSecurityModule</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/security/bugbounty">Bug Bounties with Immunefi</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployed-contracts">Deployed Contracts</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Protocol levers</h1></header><div class="markdown"><p>The protocol provides a number of settings controllable by the DAO. Modifying each of them requires
the caller to have a specific permission. After deploying the DAO, all permissions belong to the DAO
<code>Voting</code> app, which can also manage them. This means that, initially, levers can only be changed by
the DAO voting, and other entities can be allowed to do the same only as a result of the voting.</p><p>All existing levers are listed below, grouped by the contract.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="a-note-on-upgradeability"></a>A note on upgradeability<a class="hash-link" href="#a-note-on-upgradeability" title="Direct link to heading">#</a></h3><p>The following contracts are upgradeable by the DAO voting:</p><ul><li><a href="/contracts/lido"><code>Lido</code></a></li><li><a href="/contracts/node-operators-registry"><code>NodeOperatorsRegistry</code></a></li><li><a href="/contracts/lido-oracle"><code>LidoOracle</code></a></li></ul><p>Upgradeability is implemented by the Aragon kernel and base contracts. To upgrade an app, one needs
the <code>dao.APP_MANAGER_ROLE</code> permission provided by Aragon. All upgradeable contracts use the
<a href="https://blog.openzeppelin.com/upgradeability-using-unstructured-storage" target="_blank" rel="noopener noreferrer">Unstructured Storage pattern</a> in order to provide stable storage structure across upgrades.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido"></a><a href="/contracts/lido">Lido</a><a class="hash-link" href="#lido" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="burning-steth-tokens"></a>Burning stETH tokens<a class="hash-link" href="#burning-steth-tokens" title="Direct link to heading">#</a></h3><ul><li>Mutator: <code>burnShares(address _account, uint256 _sharesAmount)</code><ul><li>Permission required: <code>BURN_ROLE</code></li></ul></li></ul><p>DAO members can burn token shares via DAO voting to offset slashings using insurance funds.
E.g. protocol was slashed by 5 Ether; by burning the amount of shares corresponding to 5 stETH
the stakers can be made whole.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="oracle"></a>Oracle<a class="hash-link" href="#oracle" title="Direct link to heading">#</a></h3><p>The address of the oracle contract.</p><ul><li>Mutator: <code>setOracle(address)</code><ul><li>Permission required: <code>SET_ORACLE</code></li></ul></li><li>Accessor: <code>getOracle() returns (address)</code></li></ul><p>This contract serves as a bridge between ETH 2.0 -&gt; ETH oracle committee members and the rest of the protocol,
implementing quorum between the members. The oracle committee members report balances controlled by the DAO
on the ETH 2.0 side, which can go up because of reward accumulation and can go down due to slashing.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fee"></a>Fee<a class="hash-link" href="#fee" title="Direct link to heading">#</a></h3><p>The total fee, in basis points (<code>10000</code> corresponding to <code>100%</code>).</p><ul><li>Mutator: <code>setFee(uint16)</code><ul><li>Permission required: <code>MANAGE_FEE</code></li></ul></li><li>Accessor: <code>getFee() returns (uint16)</code></li></ul><p>The fee is taken on staking rewards and distributed between the treasury, the insurance fund, and
node operators.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fee-distribution"></a>Fee distribution<a class="hash-link" href="#fee-distribution" title="Direct link to heading">#</a></h3><p>Controls how the fee is distributed between the treasury, the insurance fund, and node operators.
Each fee component is in basis points; the sum of all components must add up to 1 (<code>10000</code> basis points).</p><ul><li>Mutator: <code>setFeeDistribution(uint16 treasury, uint16 insurance, uint16 operators)</code><ul><li>Permission required: <code>MANAGE_FEE</code></li></ul></li><li>Accessor: <code>getFeeDistribution() returns (uint16 treasury, uint16 insurance, uint16 operators)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eth-20-withdrawal-credentials"></a>ETH 2.0 withdrawal Credentials<a class="hash-link" href="#eth-20-withdrawal-credentials" title="Direct link to heading">#</a></h3><p>Credentials to withdraw ETH on ETH 2.0 side after phase 2 is launched.</p><ul><li>Mutator: <code>setWithdrawalCredentials(bytes)</code><ul><li>Permission required: <code>MANAGE_WITHDRAWAL_KEY</code></li></ul></li><li>Accessor: <code>getWithdrawalCredentials() returns (bytes)</code></li></ul><p>The protocol uses these credentials to register new ETH 2.0 validators.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deposit-loop-iteration-limit"></a>Deposit loop iteration limit<a class="hash-link" href="#deposit-loop-iteration-limit" title="Direct link to heading">#</a></h3><p>Controls how many ETH 2.0 deposits can be made in a single transaction.</p><ul><li>A parameter of the <code>depositBufferedEther(uint256)</code> function</li><li>Default value: <code>16</code></li><li><a href="https://github.com/lidofinance/lido-dao/blob/master/test/scenario/lido_deposit_iteration_limit.js" target="_blank" rel="noopener noreferrer">Scenario test</a></li></ul><p>When someone calls <code>depositBufferedEther</code>, <code>Lido</code> tries to register as many ETH 2.0 validators
as it can given the buffered Ether amount. The limit is passed as an argument to this function and
is needed to prevent the transaction from <a href="https://github.com/ConsenSys/smart-contract-best-practices/blob/8f99aef/docs/known_attacks.md#gas-limit-dos-on-a-contract-via-unbounded-operations" target="_blank" rel="noopener noreferrer">failing due to the block gas limit</a>, which is possible
if the amount of the buffered Ether becomes sufficiently large.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pausing"></a>Pausing<a class="hash-link" href="#pausing" title="Direct link to heading">#</a></h3><ul><li>Mutators: <code>stop()</code>, <code>resume()</code><ul><li>Permission required: <code>PAUSE_ROLE</code></li></ul></li><li>Accessor: <code>isStopped() returns (bool)</code></li></ul><p>When paused, <code>Lido</code> doesn&#x27;t accept user submissions, doesn&#x27;t allow user withdrawals and oracle
report submissions. No token actions (burning, transferring, approving transfers and changing
allowances) are allowed. The following transactions revert:</p><ul><li>Plain Ether transfers;</li><li>calls to <code>submit(address)</code>;</li><li>calls to <code>depositBufferedEther(uint256)</code>;</li><li>calls to <code>withdraw(uint256, bytes32)</code> (withdrawals are not implemented yet).</li><li>calls to <code>pushBeacon(uint256, uint256)</code>;</li><li>calls to <code>burnShares(address, uint256)</code></li><li>calls to <code>transfer(address, uint256)</code></li><li>calls to <code>transferFrom(address, address, uint256)</code></li><li>calls to <code>approve(address, uint256)</code></li><li>calls to <code>increaseAllowance(address, uint)</code></li><li>calls to <code>decreaseAllowance(address, uint)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="todo"></a>TODO<a class="hash-link" href="#todo" title="Direct link to heading">#</a></h3><ul><li>Treasury (<code>getTreasury() returns (address)</code>; mutator?)</li><li>Insurance fund (<code>getInsuranceFund() returns (address)</code>; mutator?)</li><li>Transfer to vault (<code>transferToVault()</code>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nodeoperatorsregistry"></a><a href="/contracts/node-operators-registry">NodeOperatorsRegistry</a><a class="hash-link" href="#nodeoperatorsregistry" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="node-operators-list"></a>Node Operators list<a class="hash-link" href="#node-operators-list" title="Direct link to heading">#</a></h3><ul><li>Mutator: <code>addNodeOperator(string _name, address _rewardAddress, uint64 _stakingLimit)</code><ul><li>Permission required: <code>ADD_NODE_OPERATOR_ROLE</code></li></ul></li><li>Mutator: <code>setNodeOperatorName(uint256 _id, string _name)</code><ul><li>Permission required: <code>SET_NODE_OPERATOR_NAME_ROLE</code></li></ul></li><li>Mutator: <code>setNodeOperatorRewardAddress(uint256 _id, address _rewardAddress)</code><ul><li>Permission required: <code>SET_NODE_OPERATOR_ADDRESS_ROLE</code></li></ul></li><li>Mutator: <code>setNodeOperatorStakingLimit(uint256 _id, uint64 _stakingLimit)</code><ul><li>Permission required: <code>SET_NODE_OPERATOR_LIMIT_ROLE</code></li></ul></li></ul><p>Node Operators act as validators on the Beacon chain for the benefit of the protocol. Each
node operator submits no more than <code>_stakingLimit</code> signing keys that will be used later
by the protocol for registering the corresponding ETH 2.0 validators. As oracle committee
reports rewards on the ETH 2.0 side, the fee is taken on these rewards, and part of that fee
is sent to node operatorsâ€™ reward addresses (<code>_rewardAddress</code>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deactivating-a-node-operator"></a>Deactivating a node operator<a class="hash-link" href="#deactivating-a-node-operator" title="Direct link to heading">#</a></h3><ul><li>Mutator: <code>setNodeOperatorActive(uint256 _id, bool _active)</code><ul><li>Permission required: <code>SET_NODE_OPERATOR_ACTIVE_ROLE</code></li></ul></li></ul><p>Misbehaving node operators can be deactivated by calling this function. The protocol skips
deactivated operators during validator registration; also, deactivated operators donâ€™t
take part in fee distribution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="managing-node-operators-signing-keys"></a>Managing node operatorâ€™s signing keys<a class="hash-link" href="#managing-node-operators-signing-keys" title="Direct link to heading">#</a></h3><ul><li>Mutator: <code>addSigningKeys(uint256 _operator_id, uint256 _quantity, bytes _pubkeys, bytes _signatures)</code><ul><li>Permission required: <code>MANAGE_SIGNING_KEYS</code></li></ul></li><li>Mutator: <code>removeSigningKey(uint256 _operator_id, uint256 _index)</code><ul><li>Permission required: <code>MANAGE_SIGNING_KEYS</code></li></ul></li></ul><p>Allow to manage signing keys for the given node operator.</p><blockquote><p>Signing keys can also be managed by the reward address of a signing provider by calling
the equivalent functions with the <code>OperatorBH</code> suffix: <code>addSigningKeysOperatorBH</code>, <code>removeSigningKeyOperatorBH</code>.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reporting-new-stopped-validators"></a>Reporting new stopped validators<a class="hash-link" href="#reporting-new-stopped-validators" title="Direct link to heading">#</a></h3><ul><li>Mutator: <code>reportStoppedValidators(uint256 _id, uint64 _stoppedIncrement)</code><ul><li>Permission required: <code>REPORT_STOPPED_VALIDATORS_ROLE</code></li></ul></li></ul><p>Allows to report that <code>_stoppedIncrement</code> more validators of a node operator have become stopped.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lidooracle"></a><a href="/contracts/lido-oracle">LidoOracle</a><a class="hash-link" href="#lidooracle" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido-1"></a>Lido<a class="hash-link" href="#lido-1" title="Direct link to heading">#</a></h3><p>Address of the Lido contract.</p><ul><li>Accessor: <code>getLido() returns (address)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="members-list"></a>Members list<a class="hash-link" href="#members-list" title="Direct link to heading">#</a></h3><p>The list of oracle committee members.</p><ul><li>Mutators: <code>addOracleMember(address)</code>, <code>removeOracleMember(address)</code><ul><li>Permission required: <code>MANAGE_MEMBERS</code></li></ul></li><li>Accessor: <code>getOracleMembers() returns (address[])</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-quorum"></a>The quorum<a class="hash-link" href="#the-quorum" title="Direct link to heading">#</a></h3><p>The number of exactly the same reports needed to finalize the epoch.</p><ul><li>Mutator: <code>setQuorum(uint256)</code><ul><li>Permission required: <code>MANAGE_QUORUM</code></li></ul></li><li>Accessor: <code>getQuorum() returns (uint256)</code></li></ul><p>When the <code>quorum</code> number of the same reports is collected for the current epoch,</p><ul><li>the epoch is finalized (no more reports are accepted for it),</li><li>the final report is pushed to the Lido,</li><li>statistics collected and the <a href="#sanity-check">sanity check</a> is evaluated,</li><li><a href="#beacon-report-receiver">beacon report receiver</a> is called.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sanity-check"></a>Sanity check<a class="hash-link" href="#sanity-check" title="Direct link to heading">#</a></h3><p>To make oracles less dangerous, we can limit rewards report by 0.1% increase in stake and 15%
decrease in stake, with both values configurable by the governance in case of extremely unusual
circumstances.</p><ul><li>Mutators: <code>setAllowedBeaconBalanceAnnualRelativeIncrease(uint256)</code> and
<code>setAllowedBeaconBalanceRelativeDecrease(uint256)</code><ul><li>Permission required: <code>SET_REPORT_BOUNDARIES</code></li></ul></li><li>Accessors: <code>getAllowedBeaconBalanceAnnualRelativeIncrease() returns (uint256)</code> and
<code>getAllowedBeaconBalanceRelativeDecrease() returns (uint256)</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="beacon-report-receiver"></a>Beacon report receiver<a class="hash-link" href="#beacon-report-receiver" title="Direct link to heading">#</a></h3><p>It is possible to register a contract to be notified of the report push to Lido (when the quorum is
reached). The contract should provide
<a href="https://github.com/lidofinance/lido-dao/blob/develop/contracts/0.4.24/interfaces/IBeaconReportReceiver.sol" target="_blank" rel="noopener noreferrer">IBeaconReportReceiver</a> interface.</p><ul><li>Mutator: <code>setBeaconReportReceiver(address)</code><ul><li>Permission required: <code>SET_BEACON_REPORT_RECEIVER</code></li></ul></li><li>Accessor: <code>getBeaconReportReceiver() returns (address)</code></li></ul><p>Note that setting zero address disables this functionality.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="current-reporting-status"></a>Current reporting status<a class="hash-link" href="#current-reporting-status" title="Direct link to heading">#</a></h3><p>For transparency we provide accessors to return status of the oracle daemons reporting for the
current &quot;<a href="#expected-epoch">expected epoch</a>&quot;.</p><ul><li>Accessors:<ul><li><code>getCurrentOraclesReportStatus() returns (uint256)</code> - returns the current reporting bitmap,
representing oracles who have already pushed their version of report during the <a href="#expected-epoch">expected</a>
epoch, every oracle bit corresponds to the index of the oracle in the current members list,</li><li><code>getCurrentReportVariantsSize() returns (uint256)</code> - returns the current reporting variants
array size,</li><li><code>getCurrentReportVariant(uint256 _index) returns (uint64 beaconBalance, uint32 beaconValidators, uint16 count)</code> - returns the current reporting array element with the given
index.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="expected-epoch"></a>Expected epoch<a class="hash-link" href="#expected-epoch" title="Direct link to heading">#</a></h3><p>The oracle daemons may provide their reports only for the one epoch in every frame: the first
one. The following accessor can be used to look up the current epoch that this contract expects
reports.</p><ul><li>Accessor: <code>getExpectedEpochId() returns (uint256)</code>.</li></ul><p>Note that any later epoch, that has already come <em>and</em> is also the first epoch of its frame, is
also eligible for reporting. If some oracle daemon reports it, the contract discards any results of
this epoch and advances to the just reported one.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="version-of-the-contract"></a>Version of the contract<a class="hash-link" href="#version-of-the-contract" title="Direct link to heading">#</a></h3><p>Returns the initialized version of this contract starting from 0.</p><ul><li>Accessor: <code>getVersion() returns (uint256)</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="beacon-specification"></a>Beacon specification<a class="hash-link" href="#beacon-specification" title="Direct link to heading">#</a></h3><p>Sets and queries configurable beacon chain specification.</p><ul><li>Mutator: <code>setBeaconSpec( uint64 _epochsPerFrame, uint64 _slotsPerEpoch, uint64 _secondsPerSlot, uint64 _genesisTime )</code>,<ul><li>Permission required: <code>SET_BEACON_SPEC</code>,</li></ul></li><li>Accessor: <code>getBeaconSpec() returns (uint64 epochsPerFrame, uint64 slotsPerEpoch, uint64 secondsPerSlot, uint64 genesisTime)</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="current-epoch"></a>Current epoch<a class="hash-link" href="#current-epoch" title="Direct link to heading">#</a></h3><p>Returns the epoch calculated from current timestamp.</p><ul><li>Accessor: <code>getCurrentEpochId() returns (uint256)</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="supplemental-epoch-information"></a>Supplemental epoch information<a class="hash-link" href="#supplemental-epoch-information" title="Direct link to heading">#</a></h3><p>Returns currently reportable epoch (the first epoch of the current frame) as well as its start and
end times in seconds.</p><ul><li>Accessor: <code>getCurrentFrame() returns (uint256 frameEpochId, uint256 frameStartTime, uint256 frameEndTime)</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="last-completed-epoch"></a>Last completed epoch<a class="hash-link" href="#last-completed-epoch" title="Direct link to heading">#</a></h3><p>Return the last epoch that has been pushed to Lido.</p><ul><li>Accessor: <code>getLastCompletedEpochId() returns (uint256)</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="supplemental-rewards-information"></a>Supplemental rewards information<a class="hash-link" href="#supplemental-rewards-information" title="Direct link to heading">#</a></h3><p>Reports beacon balance and its change during the last frame.</p><ul><li>Accessor: <code>getLastCompletedReportDelta() returns (uint256 postTotalPooledEther, uint256 preTotalPooledEther, uint256 timeElapsed)</code>.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/lidofinance/docs/blob/main/docs/guides/protocol-levers.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/multisig-deployment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Multisig deployment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/guides/etherscan-voting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DAO voting with Etherscan Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-note-on-upgradeability" class="table-of-contents__link">A note on upgradeability</a></li><li><a href="#lido" class="table-of-contents__link">Lido</a><ul><li><a href="#burning-steth-tokens" class="table-of-contents__link">Burning stETH tokens</a></li><li><a href="#oracle" class="table-of-contents__link">Oracle</a></li><li><a href="#fee" class="table-of-contents__link">Fee</a></li><li><a href="#fee-distribution" class="table-of-contents__link">Fee distribution</a></li><li><a href="#eth-20-withdrawal-credentials" class="table-of-contents__link">ETH 2.0 withdrawal Credentials</a></li><li><a href="#deposit-loop-iteration-limit" class="table-of-contents__link">Deposit loop iteration limit</a></li><li><a href="#pausing" class="table-of-contents__link">Pausing</a></li><li><a href="#todo" class="table-of-contents__link">TODO</a></li></ul></li><li><a href="#nodeoperatorsregistry" class="table-of-contents__link">NodeOperatorsRegistry</a><ul><li><a href="#node-operators-list" class="table-of-contents__link">Node Operators list</a></li><li><a href="#deactivating-a-node-operator" class="table-of-contents__link">Deactivating a node operator</a></li><li><a href="#managing-node-operators-signing-keys" class="table-of-contents__link">Managing node operatorâ€™s signing keys</a></li><li><a href="#reporting-new-stopped-validators" class="table-of-contents__link">Reporting new stopped validators</a></li></ul></li><li><a href="#lidooracle" class="table-of-contents__link">LidoOracle</a><ul><li><a href="#lido-1" class="table-of-contents__link">Lido</a></li><li><a href="#members-list" class="table-of-contents__link">Members list</a></li><li><a href="#the-quorum" class="table-of-contents__link">The quorum</a></li><li><a href="#sanity-check" class="table-of-contents__link">Sanity check</a></li><li><a href="#beacon-report-receiver" class="table-of-contents__link">Beacon report receiver</a></li><li><a href="#current-reporting-status" class="table-of-contents__link">Current reporting status</a></li><li><a href="#expected-epoch" class="table-of-contents__link">Expected epoch</a></li><li><a href="#version-of-the-contract" class="table-of-contents__link">Version of the contract</a></li><li><a href="#beacon-specification" class="table-of-contents__link">Beacon specification</a></li><li><a href="#current-epoch" class="table-of-contents__link">Current epoch</a></li><li><a href="#supplemental-epoch-information" class="table-of-contents__link">Supplemental epoch information</a></li><li><a href="#last-completed-epoch" class="table-of-contents__link">Last completed epoch</a></li><li><a href="#supplemental-rewards-information" class="table-of-contents__link">Supplemental rewards information</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/styles.60d6036a.js"></script>
<script src="/assets/js/runtime~main.7a957d22.js"></script>
<script src="/assets/js/main.09e3a1f9.js"></script>
<script src="/assets/js/1.8e4f3c2a.js"></script>
<script src="/assets/js/2.4f5c6331.js"></script>
<script src="/assets/js/1a4e3797.2211e88d.js"></script>
<script src="/assets/js/1be78505.fc09edae.js"></script>
<script src="/assets/js/32.eae25c33.js"></script>
<script src="/assets/js/31.6f8be8ee.js"></script>
<script src="/assets/js/935f2afb.744bd095.js"></script>
<script src="/assets/js/17896441.d36306eb.js"></script>
<script src="/assets/js/204f6ded.115badb4.js"></script>
</body>
</html>